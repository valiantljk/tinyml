Neural Network Tools for STM32AI v1.6.0 (STM.ai v7.1.0-RC3)
Created date          : 2022-09-27 21:46:39
Parameters            : generate --name network -m /Users/dr6jl/Documents/tinyml-2022/tinyml-project/training/tuned_model/model_1.onnx --type onnx --compression 1 --verbosity 1 --workspace /var/folders/s7/4z1j63yj4wj918f4p4nz0fhm0000gp/T/mxAI_workspace13401845189164428369521930067130002 --output /Users/dr6jl/.stm32cubemx/network_output

Exec/report summary (generate)
------------------------------------------------------------------------------------------------------------------------
model file            : /Users/dr6jl/Documents/tinyml-2022/tinyml-project/training/tuned_model/model_1.onnx
type                  : onnx
c_name                : network
compression           : None
workspace dir         : /private/var/folders/s7/4z1j63yj4wj918f4p4nz0fhm0000gp/T/mxAI_workspace13401845189164428369521930067130002
output dir            : /Users/dr6jl/.stm32cubemx/network_output
model_name            : model_1
model_hash            : 9d1587c92ad2486d88b8534cf64b3200
input 1/1             : 'input_1'
                        1250 items, 4.88 KiB, ai_float, float, (1,1250,1,1), domain:user/
output 1/1            : 'node_59'
                        2 items, 8 B, ai_float, float, (1,1,1,2), domain:user/
params #              : 10,299 items (40.23 KiB)
macc                  : 214,421
weights (ro)          : 41,196 B (40.23 KiB) (1 segment)
activations (rw)      : 7,984 B (7.80 KiB) (1 segment)
ram (total)           : 12,992 B (12.69 KiB) = 7,984 + 5,000 + 8

Model name - model_1 ['input_1'] ['node_59']
----------------------------------------------------------------------------------------------------------------------------------------------
id   layer (type)                 oshape         param/size     macc     connected to   |   c_size             c_macc            c_type      
----------------------------------------------------------------------------------------------------------------------------------------------
16   fc1_1_weight (Placeholder)   (1,740,1,10)   7,400/29,600                           |   -29,600(-100.0%)                    
     fc1_1_bias (Placeholder)     (1,1,1,10)     10/40                                  |   -40(-100.0%)                        
----------------------------------------------------------------------------------------------------------------------------------------------
18   fc2_0_weight (Placeholder)   (1,10,1,2)     20/80                                  |   -80(-100.0%)                        
     fc2_0_bias (Placeholder)     (1,1,1,2)      2/8                                    |   -8(-100.0%)                         
----------------------------------------------------------------------------------------------------------------------------------------------
0    input_1 (Input)              (1,1250,1,1)                                          |                                       
     node_40 (Conv2D)             (1,623,1,3)    21/84          11,217   input_1        |                      +1,869(+16.7%)    conv2d()[0] 
----------------------------------------------------------------------------------------------------------------------------------------------
1    node_41 (Nonlinearity)       (1,623,1,3)                   1,869    node_40        |                      -1,869(-100.0%)  
----------------------------------------------------------------------------------------------------------------------------------------------
2    node_42 (ScaleBias)          (1,623,1,3)    6/24           3,738    node_41        |                                        bn()[1]     
----------------------------------------------------------------------------------------------------------------------------------------------
3    node_43 (Conv2D)             (1,310,1,5)    80/320         23,255   node_42        |                      +1,550(+6.7%)     conv2d()[2] 
----------------------------------------------------------------------------------------------------------------------------------------------
4    node_44 (Nonlinearity)       (1,310,1,5)                   1,550    node_43        |                      -1,550(-100.0%)  
----------------------------------------------------------------------------------------------------------------------------------------------
5    node_45 (ScaleBias)          (1,310,1,5)    10/40          3,100    node_44        |                                        bn()[3]     
----------------------------------------------------------------------------------------------------------------------------------------------
6    node_46 (Conv2D)             (1,154,1,10)   210/840        30,810   node_45        |                      +1,540(+5.0%)     conv2d()[4] 
----------------------------------------------------------------------------------------------------------------------------------------------
7    node_47 (Nonlinearity)       (1,154,1,10)                  1,540    node_46        |                      -1,540(-100.0%)  
----------------------------------------------------------------------------------------------------------------------------------------------
8    node_48 (ScaleBias)          (1,154,1,10)   20/80          3,080    node_47        |                                        bn()[5]     
----------------------------------------------------------------------------------------------------------------------------------------------
9    node_49 (Conv2D)             (1,76,1,20)    820/3,280      60,820   node_48        |                      +1,520(+2.5%)     conv2d()[6] 
----------------------------------------------------------------------------------------------------------------------------------------------
10   node_50 (Nonlinearity)       (1,76,1,20)                   1,520    node_49        |                      -1,520(-100.0%)  
----------------------------------------------------------------------------------------------------------------------------------------------
11   node_51 (ScaleBias)          (1,76,1,20)    40/160         3,040    node_50        |                                        bn()[7]     
----------------------------------------------------------------------------------------------------------------------------------------------
12   node_52 (Conv2D)             (1,37,1,20)    1,620/6,480    59,220   node_51        |                      +740(+1.2%)       conv2d()[8] 
----------------------------------------------------------------------------------------------------------------------------------------------
13   node_53 (Nonlinearity)       (1,37,1,20)                   740      node_52        |                      -740(-100.0%)    
----------------------------------------------------------------------------------------------------------------------------------------------
14   node_54 (ScaleBias)          (1,37,1,20)    40/160         1,480    node_53        |                                        bn()[9]     
----------------------------------------------------------------------------------------------------------------------------------------------
15   node_56 (Reshape)            (1,1,1,740)                            node_54        |                                       
----------------------------------------------------------------------------------------------------------------------------------------------
16   node_57 (Gemm)               (1,1,1,10)                    7,410    node_56        |   +29,640(+100.0%)                     gemm()[10]  
                                                                         fc1_1_weight   |  
                                                                         fc1_1_bias     |  
----------------------------------------------------------------------------------------------------------------------------------------------
17   node_58 (Nonlinearity)       (1,1,1,10)                    10       node_57        |                                        nl()[11]    
----------------------------------------------------------------------------------------------------------------------------------------------
18   node_59 (Gemm)               (1,1,1,2)                     22       node_58        |   +88(+100.0%)                         gemm()/o[12]
                                                                         fc2_0_weight   |  
                                                                         fc2_0_bias     |  
----------------------------------------------------------------------------------------------------------------------------------------------
model/c-model: macc=214,421/214,421  weights=41,196/41,196  activations=--/7,984 io=--/5,008



Generated C-graph summary
------------------------------------------------------------------------------------------------------------------------
model name            : model_1
c-name                : network
c-node #              : 13
c-array #             : 38
activations size      : 7984 (1 segments)
weights size          : 41196 (1 segments)
macc                  : 214421
inputs                : ['input_1_output']
outputs               : ['node_59_output']

C-Arrays (38)
----------------------------------------------------------------------------------------------
c_id   name (*_array)    item/size    domain/mem-pool           c-type        fmt     comment
----------------------------------------------------------------------------------------------
0      input_1_output    1250/5000    user/                     float         float   /input 
1      node_40_output    1869/7476    activations/**default**   float         float          
2      node_42_output    1869/7476    activations/**default**   float         float          
3      node_43_output    1550/6200    activations/**default**   float         float          
4      node_45_output    1550/6200    activations/**default**   float         float          
5      node_46_output    1540/6160    activations/**default**   float         float          
6      node_48_output    1540/6160    activations/**default**   float         float          
7      node_49_output    1520/6080    activations/**default**   float         float          
8      node_51_output    1520/6080    activations/**default**   float         float          
9      node_52_output    740/2960     activations/**default**   float         float          
10     node_54_output    740/2960     activations/**default**   float         float          
11     node_57_output    10/40        activations/**default**   float         float          
12     node_58_output    10/40        activations/**default**   float         float          
13     node_59_output    2/8          user/                     float         float   /output
14     node_40_weights   18/72        weights/                  const float   float          
15     node_40_bias      3/12         weights/                  const float   float          
16     node_42_scale     3/12         weights/                  const float   float          
17     node_42_bias      3/12         weights/                  const float   float          
18     node_43_weights   75/300       weights/                  const float   float          
19     node_43_bias      5/20         weights/                  const float   float          
20     node_45_scale     5/20         weights/                  const float   float          
21     node_45_bias      5/20         weights/                  const float   float          
22     node_46_weights   200/800      weights/                  const float   float          
23     node_46_bias      10/40        weights/                  const float   float          
24     node_48_scale     10/40        weights/                  const float   float          
25     node_48_bias      10/40        weights/                  const float   float          
26     node_49_weights   800/3200     weights/                  const float   float          
27     node_49_bias      20/80        weights/                  const float   float          
28     node_51_scale     20/80        weights/                  const float   float          
29     node_51_bias      20/80        weights/                  const float   float          
30     node_52_weights   1600/6400    weights/                  const float   float          
31     node_52_bias      20/80        weights/                  const float   float          
32     node_54_scale     20/80        weights/                  const float   float          
33     node_54_bias      20/80        weights/                  const float   float          
34     fc2_0_bias        2/8          weights/                  const float   float          
35     fc2_0_weight      20/80        weights/                  const float   float          
36     fc1_1_bias        10/40        weights/                  const float   float          
37     fc1_1_weight      7400/29600   weights/                  const float   float          
----------------------------------------------------------------------------------------------

C-Layers (13)
-------------------------------------------------------------------------------------------------
c_id   name (*_layer)   id   layer_type   macc    rom     tensors              shape (array id) 
-------------------------------------------------------------------------------------------------
0      node_40          1    conv2d       13086   84      I: input_1_output    (1,1250,1,1) (0) 
                                                          W: node_40_weights   (1,3,6,1) (14)   
                                                          W: node_40_bias      (1,1,1,3) (15)   
                                                          O: node_40_output    (1,623,1,3) (1)  
-------------------------------------------------------------------------------------------------
1      node_42          2    bn           3738    24      I: node_40_output    (1,623,1,3) (1)  
                                                          W: node_42_scale     (1,1,1,3) (16)   
                                                          W: node_42_bias      (1,1,1,3) (17)   
                                                          O: node_42_output    (1,623,1,3) (2)  
-------------------------------------------------------------------------------------------------
2      node_43          4    conv2d       24805   320     I: node_42_output    (1,623,1,3) (2)  
                                                          W: node_43_weights   (3,5,5,1) (18)   
                                                          W: node_43_bias      (1,1,1,5) (19)   
                                                          O: node_43_output    (1,310,1,5) (3)  
-------------------------------------------------------------------------------------------------
3      node_45          5    bn           3100    40      I: node_43_output    (1,310,1,5) (3)  
                                                          W: node_45_scale     (1,1,1,5) (20)   
                                                          W: node_45_bias      (1,1,1,5) (21)   
                                                          O: node_45_output    (1,310,1,5) (4)  
-------------------------------------------------------------------------------------------------
4      node_46          7    conv2d       32350   840     I: node_45_output    (1,310,1,5) (4)  
                                                          W: node_46_weights   (5,10,4,1) (22)  
                                                          W: node_46_bias      (1,1,1,10) (23)  
                                                          O: node_46_output    (1,154,1,10) (5) 
-------------------------------------------------------------------------------------------------
5      node_48          8    bn           3080    80      I: node_46_output    (1,154,1,10) (5) 
                                                          W: node_48_scale     (1,1,1,10) (24)  
                                                          W: node_48_bias      (1,1,1,10) (25)  
                                                          O: node_48_output    (1,154,1,10) (6) 
-------------------------------------------------------------------------------------------------
6      node_49          10   conv2d       62340   3280    I: node_48_output    (1,154,1,10) (6) 
                                                          W: node_49_weights   (10,20,4,1) (26) 
                                                          W: node_49_bias      (1,1,1,20) (27)  
                                                          O: node_49_output    (1,76,1,20) (7)  
-------------------------------------------------------------------------------------------------
7      node_51          11   bn           3040    160     I: node_49_output    (1,76,1,20) (7)  
                                                          W: node_51_scale     (1,1,1,20) (28)  
                                                          W: node_51_bias      (1,1,1,20) (29)  
                                                          O: node_51_output    (1,76,1,20) (8)  
-------------------------------------------------------------------------------------------------
8      node_52          13   conv2d       59960   6480    I: node_51_output    (1,76,1,20) (8)  
                                                          W: node_52_weights   (20,20,4,1) (30) 
                                                          W: node_52_bias      (1,1,1,20) (31)  
                                                          O: node_52_output    (1,37,1,20) (9)  
-------------------------------------------------------------------------------------------------
9      node_54          14   bn           1480    160     I: node_52_output    (1,37,1,20) (9)  
                                                          W: node_54_scale     (1,1,1,20) (32)  
                                                          W: node_54_bias      (1,1,1,20) (33)  
                                                          O: node_54_output    (1,37,1,20) (10) 
-------------------------------------------------------------------------------------------------
10     node_57          16   gemm         7410    29640   I: node_54_output0   (1,1,1,740) (10) 
                                                          I: fc1_1_weight      (1,10,1,740) (37)
                                                          I: fc1_1_bias        (1,1,1,10) (36)  
                                                          O: node_57_output    (1,1,1,10) (11)  
-------------------------------------------------------------------------------------------------
11     node_58          17   nl           10      0       I: node_57_output    (1,1,1,10) (11)  
                                                          O: node_58_output    (1,1,1,10) (12)  
-------------------------------------------------------------------------------------------------
12     node_59          18   gemm         22      88      I: node_58_output    (1,1,1,10) (12)  
                                                          I: fc2_0_weight      (1,2,1,10) (35)  
                                                          I: fc2_0_bias        (1,1,1,2) (34)   
                                                          O: node_59_output    (1,1,1,2) (13)   
-------------------------------------------------------------------------------------------------



Complexity report per layer - macc=214,421 weights=41,196 act=7,984 ram_io=5,008
------------------------------------------------------------------------
id   name      c_macc                    c_rom                     c_id
------------------------------------------------------------------------
0    node_40   ||||               6.1%   |                  0.2%   [0] 
2    node_42   |                  1.7%   |                  0.1%   [1] 
3    node_43   ||||||            11.6%   |                  0.8%   [2] 
5    node_45   |                  1.4%   |                  0.1%   [3] 
6    node_46   ||||||||          15.1%   |                  2.0%   [4] 
8    node_48   |                  1.4%   |                  0.2%   [5] 
9    node_49   ||||||||||||||||  29.1%   ||                 8.0%   [6] 
11   node_51   |                  1.4%   |                  0.4%   [7] 
12   node_52   |||||||||||||||   28.0%   ||||              15.7%   [8] 
14   node_54   |                  0.7%   |                  0.4%   [9] 
16   node_57   ||                 3.5%   ||||||||||||||||  71.9%   [10]
17   node_58   |                  0.0%   |                  0.0%   [11]
18   node_59   |                  0.0%   |                  0.2%   [12]

Generated files (5)
-------------------------------------------------------------------
/Users/dr6jl/.stm32cubemx/network_output/network_config.h
/Users/dr6jl/.stm32cubemx/network_output/network.h
/Users/dr6jl/.stm32cubemx/network_output/network.c
/Users/dr6jl/.stm32cubemx/network_output/network_data.h
/Users/dr6jl/.stm32cubemx/network_output/network_data.c
